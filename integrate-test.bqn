#!/usr/bin/env BQN

rel_tolâ†1eÂ¯9
abs_tolâ†0

IsClose â† {
  (|ğ•©-ğ•¨)â‰¤abs_tolâŒˆrel_tolÃ—ğ•¨âŒˆâ—‹|ğ•©
}

Test â† {
  msg â† ("expected: " âˆ¾ (â€¢Fmt ğ•¨) âˆ¾ ", got: " âˆ¾ â€¢Fmt ğ•©)
  â€¢Out "  "âˆ¾(ğ•¨ IsCloseâ—¶"Fail: "â€¿"Pass: " ğ•©)âˆ¾ msg
}

int â† â€¢Import "integrate.bqn"


â€¢Out "test Trap"
4.0 Test int.Trap 1â€¿2â€¿3
8.0 Test 2 int.Trap 1â€¿2â€¿3
8.0 Test 4â€¿6â€¿8 int.Trap 1â€¿2â€¿3
Â¯8.0 Test 8â€¿6â€¿4 int.Trap 1â€¿2â€¿3
# Int[x^2, 0, 1]
0.33340274885464394 Test (Ã·49) int.Trap Ã—Ëœ(â†•Ã·-âŸœ1)50
tâ†2Ã—Ï€Ã—(â†•Ã·-âŸœ1)1000
xâ†â€¢math.Sin t
yâ†â€¢math.Cos t
3.141571941375841 Test x int.Trap y
